import{a as N,b as O,e as A,w as R,r as v,f as V,h as M,u as d,i as E,j as T,k as z,l as y,o as k,m as B,p as C,q as U,c as F,s as I,t as p,F as S,v as j,x as q,y as $}from"./entry.148313fa.mjs";const G=()=>null;function K(...l){var h,m,x,w,P,b,f;const i=typeof l[l.length-1]=="string"?l.pop():void 0;typeof l[0]!="string"&&l.unshift(i);let[t,n,e={}]=l;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");e.server=(h=e.server)!=null?h:!0,e.default=(m=e.default)!=null?m:G,e.defer&&console.warn("[useAsyncData] `defer` has been renamed to `lazy`. Support for `defer` will be removed in RC."),e.lazy=(w=(x=e.lazy)!=null?x:e.defer)!=null?w:!1,e.initialCache=(P=e.initialCache)!=null?P:!0;const a=N(),o=M();if(o&&!o._nuxtOnBeforeMountCbs){const c=o._nuxtOnBeforeMountCbs=[];o&&(O(()=>{c.forEach(r=>{r()}),c.splice(0,c.length)}),A(()=>c.splice(0,c.length)))}const _=()=>e.initialCache&&a.payload.data[t]!==void 0,s={data:R((b=a.payload.data[t])!=null?b:e.default()),pending:v(!_()),error:v((f=a.payload._errors[t])!=null?f:null)};s.refresh=(c={})=>a._asyncDataPromises[t]?a._asyncDataPromises[t]:c._initial&&_()?a.payload.data[t]:(s.pending.value=!0,a._asyncDataPromises[t]=new Promise((r,H)=>{try{r(n(a))}catch(L){H(L)}}).then(r=>{e.transform&&(r=e.transform(r)),e.pick&&(r=J(r,e.pick)),s.data.value=r,s.error.value=null}).catch(r=>{s.error.value=r,s.data.value=d(e.default())}).finally(()=>{s.pending.value=!1,a.payload.data[t]=s.data.value,s.error.value&&(a.payload._errors[t]=!0),delete a._asyncDataPromises[t]}),a._asyncDataPromises[t]);const g=()=>s.refresh({_initial:!0}),u=e.server!==!1&&a.payload.serverRendered;{u&&a.isHydrating&&t in a.payload.data?s.pending.value=!1:o&&a.payload.serverRendered&&(a.isHydrating||e.lazy)?o._nuxtOnBeforeMountCbs.push(g):g(),e.watch&&V(e.watch,()=>s.refresh());const c=a.hook("app:data:refresh",r=>{if(!r||r.includes(t))return s.refresh()});o&&A(c)}const D=Promise.resolve(a._asyncDataPromises[t]).then(()=>s);return Object.assign(D,s),D}function J(l,i){const t={};for(const n of i)t[n]=l[n];return t}function Q(){const l=E();return{getHttp:(t,n,e)=>K(t,()=>$fetch(l.API_BASE_URL+n,{params:e}),"$8vqA66Og8F")}}function W(){const{getHttp:l}=Q(),i=v(),t=v(0),n=v(1),e=v(10),a=v(!1),o=async()=>{a.value=!0;try{const{data:u}=await l("lists-"+n.value,"search/users",{q:"location:madagascar",page:n.value,per_page:e.value});i.value=u.value,t.value=Math.ceil(i.value.total_count/e.value)<=100?Math.ceil(i.value.total_count/e.value):100}catch(u){console.log("error",u)}finally{a.value=!1}};return{getUserList:o,userList:i,nextPage:()=>{n.value<t.value&&(n.value=n.value+1,o())},prevPage:()=>{n.value>1&&(n.value=n.value-1,o())},goTo:u=>{n.value=u,o()},page:n,total:t,loading:a}}const X=p("thead",null,[p("tr",null,[p("th",{class:"text-left"}," Name "),p("th",{class:"text-left"}," Picture ")])],-1),Y={class:"text-center"},ee={__name:"index",async setup(l){let i,t;const{userList:n,getUserList:e,nextPage:a,prevPage:o,goTo:_,page:s,total:g,loading:u}=W();return T({title:"List of User",viewport:"width=device-width, initial-scale=1, maximum-scale=1",charset:"utf-8",meta:[{name:"description",content:"Github list of user ranking"}]}),[i,t]=z(()=>e()),await i,t(),(D,h)=>{const m=y("v-progress-linear"),x=y("v-avatar"),w=y("v-table"),P=y("v-pagination"),b=y("v-container");return k(),B("div",null,[C(b,null,{default:U(()=>[C(w,{theme:"dark"},{default:U(()=>[d(u)?(k(),F(m,{key:0,color:"cyan",streams:""})):I("",!0),X,p("tbody",null,[(k(!0),B(S,null,j(d(n).items,f=>(k(),B("tr",{key:f.id},[p("td",null,$(f.login),1),p("td",null,[C(x,{large:"",image:f.avatar_url},null,8,["image"])])]))),128))])]),_:1}),p("div",Y,[C(P,{modelValue:d(s),"onUpdate:modelValue":[h[0]||(h[0]=f=>q(s)?s.value=f:null),d(_)],length:d(g),onNext:d(a),onPrevious:d(o)},null,8,["modelValue","length","onNext","onPrevious","onUpdate:modelValue"])])]),_:1})])}}};export{ee as default};
